<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>WTX-1: Cross-Domain Context Preservation Protocol</title>
<meta content="Ravi Teja Surampudi" name="author">
<meta content="
       
        This document defines the WTX-1 (WaiTag Transfer Protocol,
        version 1) for preserving pseudonymous user context across
        unrelated web domains without third-party cookies, browser
        fingerprinting, login requirements, or personal data collection.
        The protocol uses cryptographically generated pseudonymous
        identifiers (WaiTags), URL hash fragment transport, server-side
        verification, and DNS-based domain authorization to enable
        privacy-respecting cross-domain analytics.
       
    " name="description">
<meta content="xml2rfc 3.31.0" name="generator">
<meta content="cross-domain" name="keyword">
<meta content="analytics" name="keyword">
<meta content="privacy" name="keyword">
<meta content="pseudonymous" name="keyword">
<meta content="cookies" name="keyword">
<meta content="draft-surampudi-wtx1-00" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.31.0
    Python 3.11.14
    ConfigArgParse 1.7.1
    google-i18n-address 3.1.1
    intervaltree 3.2.1
    Jinja2 3.1.6
    lxml 6.0.2
    platformdirs 4.9.2
    pycountry 26.2.16
    PyYAML 6.0.3
    requests 2.32.5
    wcwidth 0.6.0
-->
<link href="draft-surampudi-wtx1-00.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://static.ietf.org/fonts/noto-sans/import.css'); /* Sans-serif */
@import url('https://static.ietf.org/fonts/noto-serif/import.css'); /* Serif (print) */
@import url('https://static.ietf.org/fonts/roboto-mono/import.css'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
@media print {
  svg {
    max-height: 850px;
    max-width: 660px;
  }
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}
.xref {
  overflow-wrap: normal;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    max-width: 100%;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: upper-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code, dt tt, dt code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > blockquote:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">WTX-1</td>
<td class="right">February 2026</td>
</tr></thead>
<tfoot><tr>
<td class="left">Surampudi</td>
<td class="center">Expires 24 August 2026</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Independent Submission</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-surampudi-wtx1-00</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2026-02-20" class="published">20 February 2026</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2026-08-24">24 August 2026</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R. T. Surampudi</div>
<div class="org">Nylo Project</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">WTX-1: Cross-Domain Context Preservation Protocol</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">
        This document defines the WTX-1 (WaiTag Transfer Protocol,
        version 1) for preserving pseudonymous user context across
        unrelated web domains without third-party cookies, browser
        fingerprinting, login requirements, or personal data collection.
        The protocol uses cryptographically generated pseudonymous
        identifiers (WaiTags), URL hash fragment transport, server-side
        verification, and DNS-based domain authorization to enable
        privacy-respecting cross-domain analytics.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 24 August 2026.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2026 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-requirements-language" class="internal xref">Requirements Language</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-terminology" class="internal xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-protocol-overview" class="internal xref">Protocol Overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-step-by-step" class="internal xref">Step-by-Step</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-waitag-format" class="internal xref">WaiTag Format</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-structure" class="internal xref">Structure</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-properties" class="internal xref">Properties</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-generation-requirements" class="internal xref">Generation Requirements</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-token-transport" class="internal xref">Token Transport</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-primary-url-hash-fragment" class="internal xref">Primary: URL Hash Fragment</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-fallback-url-query-paramete" class="internal xref">Fallback: URL Query Parameters</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-parameter-names" class="internal xref">Parameter Names</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="auto internal xref">5.4</a>.  <a href="#name-token-cleanup" class="internal xref">Token Cleanup</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-token-format-and-verificati" class="internal xref">Token Format and Verification</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-token-contents" class="internal xref">Token Contents</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-verification-requirements" class="internal xref">Verification Requirements</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-verification-endpoint" class="internal xref">Verification Endpoint</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-dns-domain-authorization" class="internal xref">DNS Domain Authorization</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-purpose" class="internal xref">Purpose</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-txt-record-format" class="internal xref">TXT Record Format</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-verification-flow" class="internal xref">Verification Flow</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="auto internal xref">7.4</a>.  <a href="#name-subdomain-inheritance" class="internal xref">Subdomain Inheritance</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-client-side-storage" class="internal xref">Client-Side Storage</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-three-layer-strategy" class="internal xref">Three-Layer Strategy</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-storage-read-priority" class="internal xref">Storage Read Priority</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="auto internal xref">8.3</a>.  <a href="#name-data-stored" class="internal xref">Data Stored</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#section-8.4" class="auto internal xref">8.4</a>.  <a href="#name-data-obfuscation" class="internal xref">Data Obfuscation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-consent-and-anonymous-mode" class="internal xref">Consent and Anonymous Mode</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-consent-api" class="internal xref">Consent API</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-anonymous-mode-behavior" class="internal xref">Anonymous Mode Behavior</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="auto internal xref">9.3</a>.  <a href="#name-consent-restoration" class="internal xref">Consent Restoration</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4">
                <p id="section-toc.1-1.9.2.4.1"><a href="#section-9.4" class="auto internal xref">9.4</a>.  <a href="#name-regulatory-considerations" class="internal xref">Regulatory Considerations</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-token-security" class="internal xref">Token Security</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-transport-security" class="internal xref">Transport Security</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="auto internal xref">10.3</a>.  <a href="#name-input-validation" class="internal xref">Input Validation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4">
                <p id="section-toc.1-1.10.2.4.1"><a href="#section-10.4" class="auto internal xref">10.4</a>.  <a href="#name-rate-limiting" class="internal xref">Rate Limiting</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.5">
                <p id="section-toc.1-1.10.2.5.1"><a href="#section-10.5" class="auto internal xref">10.5</a>.  <a href="#name-response-headers" class="internal xref">Response Headers</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-privacy-considerations" class="internal xref">Privacy Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="auto internal xref">13</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#section-13.1" class="auto internal xref">13.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#section-13.2" class="auto internal xref">13.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-comparison-with-existing-ap" class="internal xref">Comparison with Existing Approaches</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">
        Third-party cookies have been the primary mechanism for
        cross-domain user identification since the 1990s. With Safari's
        Intelligent Tracking Prevention
        (<span><a href="#ITP" class="internal xref">ITP</a> [<a href="#ITP" class="cite xref">ITP</a>]</span>) deployed in 2017, Firefox
        Enhanced Tracking Protection (ETP) in 2019, and Chrome's Privacy
        Sandbox initiative beginning in 2024, this mechanism is being
        eliminated across all major browsers.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">
        When a user navigates from one domain to an unrelated domain
        (different effective top-level domain plus one label, or eTLD+1),
        analytics systems lose the ability to understand that the same
        visitor made both visits. This creates blind spots in patient
        journey analytics across healthcare providers, financial customer
        experience across banking portals, government service usage
        across agency domains, and multi-brand retail analytics.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">
        Existing solutions have significant limitations: browser
        fingerprinting is ethically problematic and legally risky;
        login-based identity excludes anonymous visitors; first-party
        data sharing requires business partnerships and PII exchange;
        Privacy Sandbox Topics API is coarse-grained, advertising-focused,
        and Chrome-only.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">
        WTX-1 addresses these limitations by defining a protocol that:<a href="#section-1-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1-5">
        <li id="section-1-5.1">Preserves visitor context across unrelated domains<a href="#section-1-5.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-5.2">Never collects, transmits, or derives personal information<a href="#section-1-5.2" class="pilcrow">¶</a>
</li>
        <li id="section-1-5.3">Works without cookies, fingerprinting, or login<a href="#section-1-5.3" class="pilcrow">¶</a>
</li>
        <li id="section-1-5.4">Resists tracking by unauthorized third parties via DNS-based domain authorization<a href="#section-1-5.4" class="pilcrow">¶</a>
</li>
        <li id="section-1-5.5">Degrades gracefully when consent is denied<a href="#section-1-5.5" class="pilcrow">¶</a>
</li>
        <li id="section-1-5.6">Operates within GDPR, CCPA, and ePrivacy frameworks<a href="#section-1-5.6" class="pilcrow">¶</a>
</li>
      </ol>
<div id="requirements-language">
<section id="section-1.1">
        <h3 id="name-requirements-language">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-1.1-1">
          The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
          "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",
          "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document
          are to be interpreted as described in BCP 14
          <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when,
          and only when, they appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<span class="break"></span><dl class="dlParallel" id="section-2-1">
        <dt id="section-2-1.1">WaiTag</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.2">
          A pseudonymous identifier generated per-visitor using
          cryptographic randomness. Format:
          wai_&lt;timestamp_b36&gt;_&lt;random&gt;&lt;domain_hash&gt;.
          Contains no personally identifiable information (PII).<a href="#section-2-1.2" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.3">Origin Domain</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.4">
          The domain where the user's session begins and the WaiTag
          is generated.<a href="#section-2-1.4" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.5">Destination Domain</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.6">
          The domain the user navigates to, which receives and
          verifies the WaiTag via a cross-domain token.<a href="#section-2-1.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.7">Cross-Domain Token</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.8">
          A time-limited, server-signed token encoding the WaiTag
          for transfer between domains.<a href="#section-2-1.8" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.9">DNS Authorization</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.10">
          Domain ownership verification via DNS TXT records that
          authorizes a domain to participate in WTX-1 identity
          sharing.<a href="#section-2-1.10" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.11">Verification Server</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.12">
          The server-side component that issues, signs, and verifies
          cross-domain tokens.<a href="#section-2-1.12" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.13">Anonymous Mode</dt>
        <dd style="margin-left: 1.5em" id="section-2-1.14">
          A degraded operating mode where no WaiTag is generated,
          no identity is preserved, and identity-related API calls
          are no-ops.<a href="#section-2-1.14" class="pilcrow">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="protocol-overview">
<section id="section-3">
      <h2 id="name-protocol-overview">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-protocol-overview" class="section-name selfRef">Protocol Overview</a>
      </h2>
<p id="section-3-1">
        The WTX-1 protocol operates in seven steps across three
        participants: the origin domain, the destination domain, and
        the verification server.<a href="#section-3-1" class="pilcrow">¶</a></p>
<span id="name-wtx-1-protocol-flow"></span><div id="protocol-flow">
<figure id="figure-1">
        <div class="alignLeft art-ascii-art art-text artwork" id="section-3-2.1">
<pre>
  Domain A            Verification           Domain B
  (Origin)              Server             (Destination)
     |                    |                      |
  1. User visits          |                      |
  2. Generate WaiTag      |                      |
  3. Register WaiTag ----&gt;|                      |
     |              4. Store WaiTag              |
     |                    |                      |
  5. User clicks link     |                      |
     to Domain B          |                      |
  6. Request token ------&gt;|                      |
     |              7. Verify DNS                |
     |                 authorization             |
     |&lt;--------- 8. Return signed token          |
     |                    |                      |
  9. Append token to      |                      |
     URL hash fragment    |                      |
     |                    |                      |
     |--- User navigates to Domain B -----------&gt;|
     |                    |                      |
     |                    |    10. Read token     |
     |                    |        from hash      |
     |                    |&lt;---- 11. Verify token |
     |                    |                      |
     |              12. Check signature,         |
     |                  expiry, domain           |
     |                    |                      |
     |                    |----&gt; 13. Return       |
     |                    |      identity         |
     |                    |                      |
     |                    |  14. Restore WaiTag   |
     |                    |      Clean URL        |
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-wtx-1-protocol-flow" class="selfRef">WTX-1 Protocol Flow</a>
        </figcaption></figure>
</div>
<div id="step-by-step">
<section id="section-3.1">
        <h3 id="name-step-by-step">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-step-by-step" class="section-name selfRef">Step-by-Step</a>
        </h3>
<ol start="1" type="1" class="normal type-1" id="section-3.1-1">
          <li id="section-3.1-1.1">
            <strong>WaiTag Generation:</strong> When a user first visits
            a participating domain, the client generates a WaiTag using
            the Web Crypto API (crypto.getRandomValues). The WaiTag
            format is wai_&lt;timestamp_base36&gt;_&lt;random_id&gt;&lt;domain_hash&gt;.<a href="#section-3.1-1.1" class="pilcrow">¶</a>
</li>
          <li id="section-3.1-1.2">
            <strong>Identity Registration:</strong> The client registers
            the WaiTag with the verification server. The server stores
            the WaiTag, session ID, originating domain, and timestamp.<a href="#section-3.1-1.2" class="pilcrow">¶</a>
</li>
          <li id="section-3.1-1.3">
            <strong>Cross-Domain Navigation:</strong> When the user
            navigates to another participating domain, a cross-domain
            token is appended to the destination URL. The mechanism for
            link decoration is implementation-defined (e.g., server-side
            link rewriting, client-side click handlers, or manual URL
            construction).<a href="#section-3.1-1.3" class="pilcrow">¶</a>
</li>
          <li id="section-3.1-1.4">
            <strong>Token Generation:</strong> The verification server
            generates a signed, time-limited token encoding the user's
            WaiTag and session context. The server SHOULD verify that the
            destination domain is DNS-authorized before issuing the token.<a href="#section-3.1-1.4" class="pilcrow">¶</a>
</li>
          <li id="section-3.1-1.5">
            <strong>Hash Fragment Transport:</strong> The token is
            appended to the destination URL as a hash fragment
            (#nylo_token=&lt;token&gt;). Hash fragments are never sent
            to the server in HTTP requests, providing an additional
            privacy layer.<a href="#section-3.1-1.5" class="pilcrow">¶</a>
</li>
          <li id="section-3.1-1.6">
            <strong>Token Verification:</strong> On the destination
            domain, the client reads the token from the hash fragment
            and sends it to the verification server for validation.<a href="#section-3.1-1.6" class="pilcrow">¶</a>
</li>
          <li id="section-3.1-1.7">
            <strong>Identity Restoration:</strong> If verification
            succeeds, the server returns the original WaiTag and session
            context. The client restores the user's pseudonymous identity
            on the new domain and removes the token from the URL.<a href="#section-3.1-1.7" class="pilcrow">¶</a>
</li>
        </ol>
</section>
</div>
</section>
</div>
<div id="waitag-format">
<section id="section-4">
      <h2 id="name-waitag-format">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-waitag-format" class="section-name selfRef">WaiTag Format</a>
      </h2>
<div id="waitag-structure">
<section id="section-4.1">
        <h3 id="name-structure">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-structure" class="section-name selfRef">Structure</a>
        </h3>
<p id="section-4.1-1">A WaiTag has the following structure:<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.1-2">
<pre>
wai_&lt;timestamp&gt;_&lt;random&gt;&lt;domain_hash&gt;
</pre><a href="#section-4.1-2" class="pilcrow">¶</a>
</div>
<span id="name-waitag-components"></span><div id="waitag-components">
<table class="center" id="table-1">
          <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-waitag-components" class="selfRef">WaiTag Components</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Component</th>
              <th class="text-left" rowspan="1" colspan="1">Encoding</th>
              <th class="text-left" rowspan="1" colspan="1">Length</th>
              <th class="text-left" rowspan="1" colspan="1">Source</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Prefix</td>
              <td class="text-left" rowspan="1" colspan="1">ASCII</td>
              <td class="text-left" rowspan="1" colspan="1">4 chars</td>
              <td class="text-left" rowspan="1" colspan="1">Literal "wai_"</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Timestamp</td>
              <td class="text-left" rowspan="1" colspan="1">Base-36</td>
              <td class="text-left" rowspan="1" colspan="1">~8 chars</td>
              <td class="text-left" rowspan="1" colspan="1">Current time in milliseconds</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Separator</td>
              <td class="text-left" rowspan="1" colspan="1">ASCII</td>
              <td class="text-left" rowspan="1" colspan="1">1 char</td>
              <td class="text-left" rowspan="1" colspan="1">Literal "_"</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Random ID</td>
              <td class="text-left" rowspan="1" colspan="1">Base-36</td>
              <td class="text-left" rowspan="1" colspan="1">11 chars</td>
              <td class="text-left" rowspan="1" colspan="1">crypto.getRandomValues (8 bytes)</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Domain Hash</td>
              <td class="text-left" rowspan="1" colspan="1">Hex</td>
              <td class="text-left" rowspan="1" colspan="1">8 chars</td>
              <td class="text-left" rowspan="1" colspan="1">One-way hash of hostname</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="waitag-properties">
<section id="section-4.2">
        <h3 id="name-properties">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-properties" class="section-name selfRef">Properties</a>
        </h3>
<p id="section-4.2-1">A WaiTag has the following properties:<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-2.1">Not reversible: No component can be reversed to identify a natural person.<a href="#section-4.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-2.2">Not derived from PII: No personal information is used as input.<a href="#section-4.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-2.3">Domain-scoped: The domain hash binds the WaiTag to its origin, but the hash is one-way and cannot reveal the domain to a third party.<a href="#section-4.2-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-2.4">Collision-resistant: 64 bits of cryptographic randomness provides sufficient uniqueness for analytics use cases.<a href="#section-4.2-2.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-2.5">Not a fingerprint: No hardware, software, or behavioral signals are used.<a href="#section-4.2-2.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-2.6">Not deterministic: The same user on the same device will receive different WaiTags across sessions unless identity is explicitly restored via cross-domain token.<a href="#section-4.2-2.6" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="waitag-generation">
<section id="section-4.3">
        <h3 id="name-generation-requirements">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-generation-requirements" class="section-name selfRef">Generation Requirements</a>
        </h3>
<p id="section-4.3-1">
          Implementations MUST generate WaiTags using
          crypto.getRandomValues <span>[<a href="#W3C-WebCryptoAPI" class="cite xref">W3C-WebCryptoAPI</a>]</span> or
          an equivalent cryptographically secure pseudorandom number
          generator (CSPRNG). If the Web Crypto API is not available,
          implementations MAY fall back to Math.random, but SHOULD log
          a warning indicating reduced randomness quality.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="token-transport">
<section id="section-5">
      <h2 id="name-token-transport">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-token-transport" class="section-name selfRef">Token Transport</a>
      </h2>
<div id="hash-fragment-transport">
<section id="section-5.1">
        <h3 id="name-primary-url-hash-fragment">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-primary-url-hash-fragment" class="section-name selfRef">Primary: URL Hash Fragment</a>
        </h3>
<p id="section-5.1-1">
          The cross-domain token MUST be transported via URL hash
          fragment as the primary mechanism:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1-2">
<pre>
https://destination.example.com/page#nylo_token=&lt;signed_token&gt;
</pre><a href="#section-5.1-2" class="pilcrow">¶</a>
</div>
<p id="section-5.1-3">
          Hash fragments (the portion of a URL after "#") are processed
          entirely client-side per <span>[<a href="#RFC3986" class="cite xref">RFC3986</a>]</span>
          Section 3.5. They are:<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-4.1">Never included in HTTP requests to the server<a href="#section-5.1-4.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-4.2">Never logged in server access logs<a href="#section-5.1-4.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-4.3">Never sent in the Referer header<a href="#section-5.1-4.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-4.4">Not visible to network intermediaries (proxies, CDNs, WAFs)<a href="#section-5.1-4.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.1-5">
          This provides a stronger privacy guarantee than URL query
          parameters, which are transmitted to the server and commonly
          logged.<a href="#section-5.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="search-param-fallback">
<section id="section-5.2">
        <h3 id="name-fallback-url-query-paramete">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-fallback-url-query-paramete" class="section-name selfRef">Fallback: URL Query Parameters</a>
        </h3>
<p id="section-5.2-1">
          If hash fragment transport is not feasible (e.g., the
          destination URL uses hash-based client-side routing), the
          token MAY be transported as a query parameter:<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.2-2">
<pre>
https://destination.example.com/page?nylo_token=&lt;signed_token&gt;
</pre><a href="#section-5.2-2" class="pilcrow">¶</a>
</div>
<p id="section-5.2-3">
          Implementations using query parameter transport SHOULD remove
          the token from the URL immediately after reading it, using the
          History API (history.replaceState) to clean the URL without
          triggering a page reload.<a href="#section-5.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="parameter-names">
<section id="section-5.3">
        <h3 id="name-parameter-names">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-parameter-names" class="section-name selfRef">Parameter Names</a>
        </h3>
<p id="section-5.3-1">
          Implementations MUST accept both of the following parameter
          names for cross-domain tokens:<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-2.1">"nylo_token" (primary)<a href="#section-5.3-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.3-2.2">"wai_token" (alternative)<a href="#section-5.3-2.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="token-cleanup">
<section id="section-5.4">
        <h3 id="name-token-cleanup">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-token-cleanup" class="section-name selfRef">Token Cleanup</a>
        </h3>
<p id="section-5.4-1">
          After reading a cross-domain token from the URL, the client
          MUST remove it from the URL to prevent:<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.4-2.1">Accidental sharing of token-bearing URLs<a href="#section-5.4-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.4-2.2">Token replay from browser history<a href="#section-5.4-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.4-2.3">Token exposure in analytics tools that capture full URLs<a href="#section-5.4-2.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.4-3">
          The client SHOULD use history.replaceState to remove the token
          without causing a navigation event or page reload.<a href="#section-5.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="token-format">
<section id="section-6">
      <h2 id="name-token-format-and-verificati">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-token-format-and-verificati" class="section-name selfRef">Token Format and Verification</a>
      </h2>
<div id="token-contents">
<section id="section-6.1">
        <h3 id="name-token-contents">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-token-contents" class="section-name selfRef">Token Contents</a>
        </h3>
<p id="section-6.1-1">A cross-domain token encodes the following fields:<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<span id="name-cross-domain-token-fields"></span><div id="token-fields">
<table class="center" id="table-2">
          <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-cross-domain-token-fields" class="selfRef">Cross-Domain Token Fields</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Field</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">waiTag</td>
              <td class="text-left" rowspan="1" colspan="1">The pseudonymous identifier to transfer</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">sessionId</td>
              <td class="text-left" rowspan="1" colspan="1">The session identifier from the origin domain</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">originDomain</td>
              <td class="text-left" rowspan="1" colspan="1">The domain that issued the token</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">destinationDomain</td>
              <td class="text-left" rowspan="1" colspan="1">The intended recipient domain</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">issuedAt</td>
              <td class="text-left" rowspan="1" colspan="1">UTC timestamp of token creation</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">expiresAt</td>
              <td class="text-left" rowspan="1" colspan="1">UTC timestamp of token expiry</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">signature</td>
              <td class="text-left" rowspan="1" colspan="1">Server-generated signature (HMAC or implementation-defined)</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-6.1-3">
          The token encoding format is implementation-defined. Common
          choices include JSON Web Tokens (JWT) <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>
          and opaque server-side tokens with a lookup key.<a href="#section-6.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="verification-requirements">
<section id="section-6.2">
        <h3 id="name-verification-requirements">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-verification-requirements" class="section-name selfRef">Verification Requirements</a>
        </h3>
<p id="section-6.2-1">The verification server MUST check:<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.2-2">
          <li id="section-6.2-2.1">Signature validity: The token has not been tampered with.<a href="#section-6.2-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-6.2-2.2">Expiry: The token has not expired. The expiry window is configurable; the recommended default is 5 minutes.<a href="#section-6.2-2.2" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-6.2-3">The verification server SHOULD also check:<a href="#section-6.2-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.2-4">
          <li id="section-6.2-4.1">Domain authorization: The destination domain is DNS-authorized to receive identities.<a href="#section-6.2-4.1" class="pilcrow">¶</a>
</li>
          <li id="section-6.2-4.2">Origin matching: The token was issued for the domain making the verification request.<a href="#section-6.2-4.2" class="pilcrow">¶</a>
</li>
        </ol>
</section>
</div>
<div id="verification-endpoint">
<section id="section-6.3">
        <h3 id="name-verification-endpoint">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-verification-endpoint" class="section-name selfRef">Verification Endpoint</a>
        </h3>
<p id="section-6.3-1">
          The verification endpoint accepts a POST request with
          Content-Type application/json containing the token, the
          requesting domain, a customer identifier, and the HTTP
          Referer value.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3-2">Request body:<a href="#section-6.3-2" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-6.3-3">
<pre>
{
  "token": "&lt;signed_token&gt;",
  "domain": "destination.example.com",
  "customerId": "&lt;customer_id&gt;",
  "referrer": "https://origin.example.com/page"
}
</pre><a href="#section-6.3-3" class="pilcrow">¶</a>
</div>
<p id="section-6.3-4">Success response:<a href="#section-6.3-4" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-6.3-5">
<pre>
{
  "success": true,
  "identity": {
    "sessionId": "&lt;session_id&gt;",
    "waiTag": "&lt;wai_tag&gt;",
    "userId": null
  }
}
</pre><a href="#section-6.3-5" class="pilcrow">¶</a>
</div>
<p id="section-6.3-6">Failure response:<a href="#section-6.3-6" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-6.3-7">
<pre>
{
  "success": false,
  "error": "TOKEN_EXPIRED"
}
</pre><a href="#section-6.3-7" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="dns-authorization">
<section id="section-7">
      <h2 id="name-dns-domain-authorization">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-dns-domain-authorization" class="section-name selfRef">DNS Domain Authorization</a>
      </h2>
<div id="dns-purpose">
<section id="section-7.1">
        <h3 id="name-purpose">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-purpose" class="section-name selfRef">Purpose</a>
        </h3>
<p id="section-7.1-1">
          Before a domain can receive cross-domain identities, it SHOULD
          prove ownership via a DNS TXT record. This prevents unauthorized
          domains from requesting or receiving WaiTags and ensures that
          only domains controlled by the same organization (or
          participating partners) can share visitor context.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="dns-txt-format">
<section id="section-7.2">
        <h3 id="name-txt-record-format">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-txt-record-format" class="section-name selfRef">TXT Record Format</a>
        </h3>
<p id="section-7.2-1">The DNS TXT record uses the following format:<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.2-2">
<pre>
_nylo-verify.example.com. IN TXT
    "nylo-domain-verify=&lt;verification_code&gt;"
</pre><a href="#section-7.2-2" class="pilcrow">¶</a>
</div>
<p id="section-7.2-3">
          The verification code is a unique value generated by the
          verification server for each domain registration.<a href="#section-7.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="dns-verification-flow">
<section id="section-7.3">
        <h3 id="name-verification-flow">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-verification-flow" class="section-name selfRef">Verification Flow</a>
        </h3>
<ol start="1" type="1" class="normal type-1" id="section-7.3-1">
          <li id="section-7.3-1.1">The domain owner registers the domain with the verification server and receives a verification code.<a href="#section-7.3-1.1" class="pilcrow">¶</a>
</li>
          <li id="section-7.3-1.2">The domain owner adds the TXT record to their DNS configuration.<a href="#section-7.3-1.2" class="pilcrow">¶</a>
</li>
          <li id="section-7.3-1.3">The domain owner calls the verification endpoint.<a href="#section-7.3-1.3" class="pilcrow">¶</a>
</li>
          <li id="section-7.3-1.4">The server performs a DNS lookup for _nylo-verify.&lt;domain&gt;.<a href="#section-7.3-1.4" class="pilcrow">¶</a>
</li>
          <li id="section-7.3-1.5">If the TXT record matches the expected verification code, the domain is authorized.<a href="#section-7.3-1.5" class="pilcrow">¶</a>
</li>
          <li id="section-7.3-1.6">Authorization is cached server-side and periodically re-verified.<a href="#section-7.3-1.6" class="pilcrow">¶</a>
</li>
        </ol>
</section>
</div>
<div id="subdomain-inheritance">
<section id="section-7.4">
        <h3 id="name-subdomain-inheritance">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-subdomain-inheritance" class="section-name selfRef">Subdomain Inheritance</a>
        </h3>
<p id="section-7.4-1">
          If a parent domain (e.g., example.com) is DNS-verified,
          subdomains (e.g., blog.example.com, shop.example.com) inherit
          authorization automatically. Implementations MAY provide
          configuration to exclude specific subdomains from inheritance.<a href="#section-7.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="client-storage">
<section id="section-8">
      <h2 id="name-client-side-storage">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-client-side-storage" class="section-name selfRef">Client-Side Storage</a>
      </h2>
<div id="storage-strategy">
<section id="section-8.1">
        <h3 id="name-three-layer-strategy">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-three-layer-strategy" class="section-name selfRef">Three-Layer Strategy</a>
        </h3>
<p id="section-8.1-1">
          The client SHOULD store identity data using multiple
          mechanisms for resilience against browser storage restrictions:<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<span id="name-storage-layers"></span><div id="storage-layers">
<table class="center" id="table-3">
          <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-storage-layers" class="selfRef">Storage Layers</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Layer</th>
              <th class="text-left" rowspan="1" colspan="1">Mechanism</th>
              <th class="text-left" rowspan="1" colspan="1">Persistence</th>
              <th class="text-left" rowspan="1" colspan="1">ITP Impact</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">1</td>
              <td class="text-left" rowspan="1" colspan="1">First-party cookie</td>
              <td class="text-left" rowspan="1" colspan="1">24h (JS-set under ITP)</td>
              <td class="text-left" rowspan="1" colspan="1">Capped at 7 days</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">2</td>
              <td class="text-left" rowspan="1" colspan="1">localStorage</td>
              <td class="text-left" rowspan="1" colspan="1">Until cleared</td>
              <td class="text-left" rowspan="1" colspan="1">Partitioned by eTLD+1</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">3</td>
              <td class="text-left" rowspan="1" colspan="1">sessionStorage</td>
              <td class="text-left" rowspan="1" colspan="1">Tab lifetime</td>
              <td class="text-left" rowspan="1" colspan="1">Unaffected</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="storage-priority">
<section id="section-8.2">
        <h3 id="name-storage-read-priority">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-storage-read-priority" class="section-name selfRef">Storage Read Priority</a>
        </h3>
<p id="section-8.2-1">
          When restoring identity, the client reads in order: cookie,
          localStorage, sessionStorage. The first valid result is used.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="stored-data">
<section id="section-8.3">
        <h3 id="name-data-stored">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-data-stored" class="section-name selfRef">Data Stored</a>
        </h3>
<p id="section-8.3-1">The stored identity record contains:<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-8.3-2">
<pre>
{
  "sessionId": "&lt;secure_id&gt;",
  "waiTag": "&lt;wai_tag&gt;",
  "userId": null,
  "domain": "example.com",
  "createdAt": "2026-02-20T12:00:00.000Z",
  "integrity": "&lt;hash&gt;"
}
</pre><a href="#section-8.3-2" class="pilcrow">¶</a>
</div>
<p id="section-8.3-3">
          The "integrity" field is a one-way hash of the session ID,
          domain, WaiTag, and customer ID, used to detect tampering.<a href="#section-8.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="storage-obfuscation">
<section id="section-8.4">
        <h3 id="name-data-obfuscation">
<a href="#section-8.4" class="section-number selfRef">8.4. </a><a href="#name-data-obfuscation" class="section-name selfRef">Data Obfuscation</a>
        </h3>
<p id="section-8.4-1">
          Data stored in localStorage SHOULD be encoded with a
          customer-specific salt and timestamp to prevent casual
          inspection. This is obfuscation, not cryptographic security.
          The stored data contains no PII regardless of encoding.<a href="#section-8.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="consent">
<section id="section-9">
      <h2 id="name-consent-and-anonymous-mode">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-consent-and-anonymous-mode" class="section-name selfRef">Consent and Anonymous Mode</a>
      </h2>
<div id="consent-api">
<section id="section-9.1">
        <h3 id="name-consent-api">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-consent-api" class="section-name selfRef">Consent API</a>
        </h3>
<p id="section-9.1-1">
          Implementations MUST provide a consent API that integrates
          with Consent Management Platforms (CMPs). The API MUST
          support the following operations:<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.1-2.1">setConsent({analytics: false}) - Deny consent, switch to anonymous mode<a href="#section-9.1-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-9.1-2.2">setConsent({analytics: true}) - Grant consent, restore identity tracking<a href="#section-9.1-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-9.1-2.3">getConsent() - Query current consent state, returns {analytics: boolean}<a href="#section-9.1-2.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="anonymous-mode">
<section id="section-9.2">
        <h3 id="name-anonymous-mode-behavior">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-anonymous-mode-behavior" class="section-name selfRef">Anonymous Mode Behavior</a>
        </h3>
<p id="section-9.2-1">
          When consent is denied, the client MUST operate in anonymous
          mode with the following behavior:<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.2-2.1">Event tracking remains active but with no identity attached.<a href="#section-9.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-9.2-2.2">WaiTag generation is disabled; waiTag is null.<a href="#section-9.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-9.2-2.3">The identify() API call is a no-op and is silently ignored.<a href="#section-9.2-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-9.2-2.4">getSession() returns null for waiTag and userId fields.<a href="#section-9.2-2.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-9.2-2.5">Cross-domain identity is disabled; no tokens are generated or accepted.<a href="#section-9.2-2.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-9.2-2.6">Only a session-scoped anonymous identifier is used (format: anon_&lt;timestamp&gt;_&lt;random&gt;).<a href="#section-9.2-2.6" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-9.2-2.7">No persistent identity data is written to cookies, localStorage, or sessionStorage.<a href="#section-9.2-2.7" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="consent-restoration">
<section id="section-9.3">
        <h3 id="name-consent-restoration">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-consent-restoration" class="section-name selfRef">Consent Restoration</a>
        </h3>
<p id="section-9.3-1">
          When consent is granted after starting in anonymous mode:<a href="#section-9.3-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-9.3-2">
          <li id="section-9.3-2.1">The client checks for previously stored identity data.<a href="#section-9.3-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-9.3-2.2">If found, the existing WaiTag and session are restored.<a href="#section-9.3-2.2" class="pilcrow">¶</a>
</li>
          <li id="section-9.3-2.3">If not found, a new WaiTag is generated.<a href="#section-9.3-2.3" class="pilcrow">¶</a>
</li>
          <li id="section-9.3-2.4">Cross-domain token checking is activated.<a href="#section-9.3-2.4" class="pilcrow">¶</a>
</li>
          <li id="section-9.3-2.5">Full identity tracking resumes.<a href="#section-9.3-2.5" class="pilcrow">¶</a>
</li>
        </ol>
</section>
</div>
<div id="regulatory-position">
<section id="section-9.4">
        <h3 id="name-regulatory-considerations">
<a href="#section-9.4" class="section-number selfRef">9.4. </a><a href="#name-regulatory-considerations" class="section-name selfRef">Regulatory Considerations</a>
        </h3>
<p id="section-9.4-1">
          WaiTags are designed to fall outside the
          <span><a href="#GDPR" class="internal xref">GDPR</a> [<a href="#GDPR" class="cite xref">GDPR</a>]</span> definition of
          "personal data" as defined in Article 4(1) of Regulation (EU)
          2016/679 because they contain no information derived from a
          natural person, cannot be reversed or cross-referenced to
          identify someone, and are not deterministic across sessions.<a href="#section-9.4-1" class="pilcrow">¶</a></p>
<p id="section-9.4-2">
          However, the classification of pseudonymous identifiers under
          data protection law varies by jurisdiction and is subject to
          evolving regulatory interpretation. Implementers SHOULD consult
          local legal counsel. The anonymous mode provides a conservative
          fallback for jurisdictions where pseudonymous identifiers may
          be considered personal data.<a href="#section-9.4-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="security">
<section id="section-10">
      <h2 id="name-security-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<div id="token-security">
<section id="section-10.1">
        <h3 id="name-token-security">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-token-security" class="section-name selfRef">Token Security</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-10.1-1.1">Tokens MUST be signed server-side using HMAC
          <span>[<a href="#RFC2104" class="cite xref">RFC2104</a>]</span> or an equivalent mechanism.<a href="#section-10.1-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.1-1.2">Tokens MUST have a configurable expiry window. The recommended default is 5 minutes.<a href="#section-10.1-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.1-1.3">Tokens SHOULD be single-use where feasible to prevent replay attacks.<a href="#section-10.1-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.1-1.4">Token verification MUST validate the signature and expiry.<a href="#section-10.1-1.4" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="transport-security">
<section id="section-10.2">
        <h3 id="name-transport-security">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-transport-security" class="section-name selfRef">Transport Security</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-10.2-1.1">All API communication between the client and the
          verification server MUST use HTTPS
          <span>[<a href="#RFC2818" class="cite xref">RFC2818</a>]</span>.<a href="#section-10.2-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.2-1.2">Hash fragment transport prevents server-side token logging by design, as fragments are not included in HTTP requests per <span>[<a href="#RFC3986" class="cite xref">RFC3986</a>]</span>.<a href="#section-10.2-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.2-1.3">When query parameter fallback is used, the client MUST clean the token from the URL after reading.<a href="#section-10.2-1.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="input-validation">
<section id="section-10.3">
        <h3 id="name-input-validation">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-input-validation" class="section-name selfRef">Input Validation</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-10.3-1.1">All client-supplied strings MUST be sanitized to prevent cross-site scripting (XSS) attacks. HTML entity encoding is RECOMMENDED.<a href="#section-10.3-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.3-1.2">String fields MUST be length-limited. The recommended maximum is 1,000 characters.<a href="#section-10.3-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.3-1.3">Domain values MUST be validated before use in DNS lookups or token generation.<a href="#section-10.3-1.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="rate-limiting">
<section id="section-10.4">
        <h3 id="name-rate-limiting">
<a href="#section-10.4" class="section-number selfRef">10.4. </a><a href="#name-rate-limiting" class="section-name selfRef">Rate Limiting</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-10.4-1.1">API endpoints MUST implement rate limiting. The recommended default is 100 requests per IP address per minute.<a href="#section-10.4-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.4-1.2">Rate limit status MUST be communicated via X-RateLimit-Limit, X-RateLimit-Remaining, and X-RateLimit-Reset response headers.<a href="#section-10.4-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.4-1.3">Exceeded limits MUST return HTTP 429 (Too Many Requests).<a href="#section-10.4-1.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="response-headers">
<section id="section-10.5">
        <h3 id="name-response-headers">
<a href="#section-10.5" class="section-number selfRef">10.5. </a><a href="#name-response-headers" class="section-name selfRef">Response Headers</a>
        </h3>
<p id="section-10.5-1">
          Servers implementing WTX-1 SHOULD set the following
          security-related response headers:<a href="#section-10.5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.5-2.1">X-Content-Type-Options: nosniff<a href="#section-10.5-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.5-2.2">X-Frame-Options: SAMEORIGIN<a href="#section-10.5-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.5-2.3">Referrer-Policy: strict-origin-when-cross-origin<a href="#section-10.5-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.5-2.4">Permissions-Policy: camera=(), microphone=(), geolocation=()<a href="#section-10.5-2.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.5-2.5">Content-Security-Policy: Appropriate policy for the deployment<a href="#section-10.5-2.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.5-2.6">Strict-Transport-Security: max-age=31536000; includeSubDomains (when serving over HTTPS)<a href="#section-10.5-2.6" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="iana">
<section id="section-11">
      <h2 id="name-iana-considerations">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-11-1">
        This document has no IANA actions.<a href="#section-11-1" class="pilcrow">¶</a></p>
<p id="section-11-2">
        If this protocol achieves broader adoption, the following
        registrations may be requested in future revisions:<a href="#section-11-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11-3.1">
          Registration of the "_nylo-verify" DNS underscore name
          prefix in the "Underscored and Globally Scoped DNS Node
          Names" registry per RFC 8552.<a href="#section-11-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-11-3.2">
          Registration of the "nylo_token" and "wai_token" URI
          fragment parameter names if a suitable registry is
          established.<a href="#section-11-3.2" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="privacy">
<section id="section-12">
      <h2 id="name-privacy-considerations">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-privacy-considerations" class="section-name selfRef">Privacy Considerations</a>
      </h2>
<p id="section-12-1">
        WTX-1 is designed from the ground up to preserve user privacy while
        enabling cross-domain analytics. This section details the privacy
        properties, guarantees, and limitations of the protocol.<a href="#section-12-1" class="pilcrow">¶</a></p>

<section id="section-12.1">
<h3 id="name-core-privacy-commitments">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-core-privacy-commitments" class="section-name selfRef">Core Privacy Commitments</a>
</h3>
<ol start="1" type="1" class="normal type-1">
<li>No PII collection: The protocol never collects, transmits, or derives personal information such as names, email addresses, phone numbers, or physical addresses.</li>
<li>No fingerprinting: No hardware, software, or behavioral signals (screen resolution, installed fonts, GPU rendering, etc.) are used to generate or correlate identifiers.</li>
<li>No third-party cookies: Cross-domain identity does not use the Set-Cookie/Cookie HTTP mechanism for cross-domain transfer.</li>
<li>No login required: Identity preservation works for anonymous visitors without requiring authentication or account creation.</li>
<li>Consent-respecting: The protocol degrades to fully anonymous tracking when consent is denied, ensuring compliance with opt-out requirements.</li>
<li>Domain-authorized: Only DNS-verified domains can participate in identity sharing, preventing unauthorized cross-domain tracking.</li>
<li>Time-limited tokens: Cross-domain tokens expire (default 5 minutes), preventing indefinite tracking or token reuse.</li>
<li>Client-side token reading: Hash fragment transport ensures tokens are never sent to destination servers in HTTP requests. The token is subsequently sent to the verification server via a dedicated API call for validation.</li>
</ol>
</section>

<section id="section-12.2">
<h3 id="name-pseudonymous-identifiers">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-pseudonymous-identifiers" class="section-name selfRef">Pseudonymous Identifiers</a>
</h3>
<p>WaiTags are pseudonymous identifiers generated using cryptographically secure random number generators (window.crypto.getRandomValues). They contain no embedded personal information, device characteristics, or derivable real-world identity. A WaiTag cannot be reversed to identify a natural person without access to a separate mapping table, which the protocol does not define or require.</p>
<p>Under GDPR, pseudonymous identifiers are still considered personal data when they can be attributed to a natural person by using additional information. Implementors MUST ensure that any additional information that could link a WaiTag to a natural person is kept separately and subject to appropriate technical and organizational measures.</p>
</section>

<section id="section-12.3">
<h3 id="name-user-control-and-consent">
<a href="#section-12.3" class="section-number selfRef">12.3. </a><a href="#name-user-control-and-consent" class="section-name selfRef">User Control and Consent</a>
</h3>
<p>Implementations SHOULD provide users with clear mechanisms to:</p>
<ol start="1" type="1" class="normal type-1">
<li>Opt out of cross-domain identity sharing while retaining single-domain analytics.</li>
<li>Clear their WaiTag and session data at any time.</li>
<li>View what data has been collected about their pseudonymous identity.</li>
<li>Request deletion of all data associated with their WaiTag.</li>
</ol>
<p>When a user denies consent, the protocol MUST degrade gracefully to anonymous mode where no cross-domain tokens are generated or accepted, and only aggregate, non-identifiable analytics are collected.</p>
</section>

<section id="section-12.4">
<h3 id="name-data-minimization">
<a href="#section-12.4" class="section-number selfRef">12.4. </a><a href="#name-data-minimization" class="section-name selfRef">Data Minimization</a>
</h3>
<p>The protocol follows the principle of data minimization as required by GDPR Article 5(1)(c). Cross-domain tokens contain only the minimum fields necessary for identity verification: a WaiTag, session identifier, optional user identifier, source domain, expiration timestamp, and cryptographic signature. No behavioral data, page content, or interaction history is included in the token.</p>
</section>

<section id="section-12.5">
<h3 id="name-cross-domain-tracking-scope">
<a href="#section-12.5" class="section-number selfRef">12.5. </a><a href="#name-cross-domain-tracking-scope" class="section-name selfRef">Cross-Domain Tracking Scope</a>
</h3>
<p>Cross-domain identity sharing is limited to domains that have been explicitly authorized via DNS TXT records. This prevents a domain from being included in a tracking network without the domain owner's explicit consent. The DNS verification mechanism ensures that only organizations with administrative control over a domain can authorize it for cross-domain identity sharing.</p>
<p>Implementations MUST NOT allow wildcard domain authorization or open enrollment of domains into a tracking network.</p>
</section>

<section id="section-12.6">
<h3 id="name-regulatory-compliance">
<a href="#section-12.6" class="section-number selfRef">12.6. </a><a href="#name-regulatory-compliance" class="section-name selfRef">Regulatory Compliance</a>
</h3>
<p>WTX-1 is designed to operate within the following regulatory frameworks:</p>
<ul>
<li>GDPR (EU): Pseudonymous processing with data minimization, purpose limitation, and right to erasure support.</li>
<li>CCPA/CPRA (California): No sale of personal information; supports opt-out mechanisms.</li>
<li>ePrivacy Directive (EU): No use of cookies or similar technologies for cross-domain transfer; hash fragment transport does not trigger cookie consent requirements.</li>
<li>HIPAA (US Healthcare): No collection or transmission of Protected Health Information (PHI).</li>
<li>COPPA (US Children): Protocol does not collect age information; implementors in child-directed services MUST implement additional safeguards.</li>
</ul>
<p>Implementors are responsible for ensuring their specific deployment complies with applicable local regulations, as the protocol alone does not guarantee regulatory compliance.</p>
</section>

<section id="section-12.7">
<h3 id="name-limitations-and-residual-risks">
<a href="#section-12.7" class="section-number selfRef">12.7. </a><a href="#name-limitations-and-residual-risks" class="section-name selfRef">Limitations and Residual Risks</a>
</h3>
<p>While WTX-1 provides strong privacy guarantees, the following residual risks should be acknowledged:</p>
<ul>
<li>Server-side correlation: Organizations operating multiple domains may correlate WaiTags server-side. The protocol limits this to DNS-authorized domains but cannot prevent the authorizing organization from performing correlation.</li>
<li>Token interception: Although hash fragment transport prevents tokens from being sent in HTTP requests, tokens may be visible to browser extensions or client-side JavaScript on the destination page before cleanup occurs.</li>
<li>Referrer leakage: Some browsers may include hash fragments in Referer headers under certain conditions. Implementations SHOULD set Referrer-Policy headers to mitigate this risk.</li>
<li>Long-lived sessions: If WaiTags are stored in localStorage without expiration, they persist indefinitely. Implementations SHOULD implement WaiTag rotation or expiration policies.</li>
</ul>
</section>

</section>
</div>
<section id="section-13">
      <h2 id="name-references">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-13.1">
        <h3 id="name-normative-references">
<a href="#section-13.1" class="section-number selfRef">13.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2104">[RFC2104]</dt>
        <dd>
<span class="refAuthor">Krawczyk, H.</span>, <span class="refAuthor">Bellare, M.</span>, and <span class="refAuthor">R. Canetti</span>, <span class="refTitle">"HMAC: Keyed-Hashing for Message Authentication"</span>, <span class="seriesInfo">RFC 2104</span>, <span class="seriesInfo">DOI 10.17487/RFC2104</span>, <time datetime="1997-02" class="refDate">February 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2104">https://www.rfc-editor.org/info/rfc2104</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2818">[RFC2818]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"HTTP Over TLS"</span>, <span class="seriesInfo">RFC 2818</span>, <span class="seriesInfo">DOI 10.17487/RFC2818</span>, <time datetime="2000-05" class="refDate">May 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2818">https://www.rfc-editor.org/info/rfc2818</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-13.2">
        <h3 id="name-informative-references">
<a href="#section-13.2" class="section-number selfRef">13.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC7519">[RFC7519]</dt>
        <dd>
<span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Bradley, J.</span>, and <span class="refAuthor">N. Sakimura</span>, <span class="refTitle">"JSON Web Token (JWT)"</span>, <span class="seriesInfo">RFC 7519</span>, <span class="seriesInfo">DOI 10.17487/RFC7519</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7519">https://www.rfc-editor.org/info/rfc7519</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="W3C-WebCryptoAPI">[W3C-WebCryptoAPI]</dt>
        <dd>
<span class="refAuthor">W3C</span>, <span class="refTitle">"Web Cryptography API"</span>, <span class="refContent">https://www.w3.org/TR/WebCryptoAPI/</span>, <span class="seriesInfo">W3C Recommendation </span>, <time datetime="2017-01" class="refDate">January 2017</time>. </dd>
<dd class="break"></dd>
<dt id="GDPR">[GDPR]</dt>
        <dd>
<span class="refAuthor">European Parliament and Council</span>, <span class="refTitle">"Regulation (EU) 2016/679 (General Data Protection Regulation)"</span>, <span class="refContent">https://eur-lex.europa.eu/eli/reg/2016/679/oj</span>, <time datetime="2016-04" class="refDate">April 2016</time>. </dd>
<dd class="break"></dd>
<dt id="ITP">[ITP]</dt>
      <dd>
<span class="refAuthor">Apple WebKit</span>, <span class="refTitle">"Intelligent Tracking Prevention"</span>, <span class="refContent">https://webkit.org/blog/7675/intelligent-tracking-prevention/</span>, <time datetime="2017-06" class="refDate">June 2017</time>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="comparison">
<section id="appendix-A">
      <h2 id="name-comparison-with-existing-ap">
<a href="#name-comparison-with-existing-ap" class="section-name selfRef">Comparison with Existing Approaches</a>
      </h2>
<span id="name-cross-domain-identity-appro"></span><table class="center" id="table-4">
        <caption>
<a href="#table-4" class="selfRef">Table 4</a>:
<a href="#name-cross-domain-identity-appro" class="selfRef">Cross-Domain Identity Approaches</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Property</th>
            <th class="text-left" rowspan="1" colspan="1">3P Cookies</th>
            <th class="text-left" rowspan="1" colspan="1">Fingerprinting</th>
            <th class="text-left" rowspan="1" colspan="1">Login-Based</th>
            <th class="text-left" rowspan="1" colspan="1">WTX-1</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Cross eTLD+1</td>
            <td class="text-left" rowspan="1" colspan="1">Yes (deprecated)</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Requires login</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Collects PII</td>
            <td class="text-left" rowspan="1" colspan="1">Varies</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Browser support</td>
            <td class="text-left" rowspan="1" colspan="1">Declining</td>
            <td class="text-left" rowspan="1" colspan="1">Declining</td>
            <td class="text-left" rowspan="1" colspan="1">Universal</td>
            <td class="text-left" rowspan="1" colspan="1">Universal</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Consent required</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Varies</td>
            <td class="text-left" rowspan="1" colspan="1">Recommended</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Works on Safari</td>
            <td class="text-left" rowspan="1" colspan="1">No (ITP)</td>
            <td class="text-left" rowspan="1" colspan="1">Partially</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Yes (degraded)</td>
          </tr>
        </tbody>
      </table>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-B">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-B-1">
        WTX-1 was developed as part of the Nylo project to address the
        analytics gap created by the deprecation of third-party cookies,
        with a focus on privacy-respecting solutions for regulated
        industries including healthcare, finance, and government.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ravi Teja Surampudi</span></div>
<div dir="auto" class="left"><span class="org">Nylo Project</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ravisurampudi@outlook.com" class="email">ravisurampudi@outlook.com</a>
</div>
<div class="url">
<span>URI:</span>
<a href="https://github.com/tejasgit/nylo" class="url">https://github.com/tejasgit/nylo</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
